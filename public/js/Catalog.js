define(["jquery","App","Catalog/Search","shapeshift"],function(t){function e(){t(".lstCatalog-scroll").each(function(){var e=t(this).find(".item-wrapper:visible");e.each(function(){var a=t(this).parent(),s=a.innerWidth()-parseFloat(a.css("padding-left"))-parseFloat(a.css("padding-right")),i=t(this).outerWidth()+4,o=Math.floor(s/i),n=e.index(t(this))+1;n%o==o-1||n%o==0?t(this).find(".item-border").addClass("aleft"):t(this).find(".item-border").removeClass("aleft")})})}t(function(){t(".nav-tabs.car-type a").on("shown.bs.tab",function(t){history.pushState(null,"",this.hash)}),t(document).click(function(e){t(e.target).closest(".item-border").length||(t(".item-border").removeClass("active").removeClass("active-left"),e.stopPropagation())}),e()}),t(document).on("click",".passenger-manufacturer-list-type:not(.active)",function(){t(".passenger-manufacturer-list-type").removeClass("active"),t(this).addClass("active"),t(this).is(".popular")?t(".non-popular-passenger").addClass("hidden"):t(this).is(".all")&&(t(".lstCatalog-scroll").each(function(){var e=t(this).parent().height();t(this).css("max-height",e-17)}),t(".non-popular-passenger").removeClass("hidden")),e()}).on("click",".autotruck-manufacturer-list-type:not(.active)",function(){t(".autotruck-manufacturer-list-type").removeClass("active"),t(this).addClass("active"),t(this).is(".popular")?t(".non-popular-autotruck").addClass("hidden"):t(this).is(".all")&&(t(".lstCatalog-scroll").each(function(){var e=t(this).parent().height();t(this).css("max-height",e-17)}),t(".non-popular-autotruck").removeClass("hidden")),e()}).on("click",".moto-manufacturer-list-type:not(.active)",function(){t(".lstCatalog-scroll .cntnr-moto").removeAttr("style"),t(".moto-manufacturer-list-type").removeClass("active"),t(this).addClass("active"),t(this).is(".popular")?t(".non-popular-motorcycle").addClass("hidden"):t(this).is(".all")&&(t(".lstCatalog-scroll").each(function(){var e=t(this).parent().height();t(this).css("max-height",e-17)}),t(".non-popular-motorcycle").removeClass("hidden")),e()}),t(".vin-sticker").click(function(){t(".b-formsearch-container").toggleClass("active")}),t(window).resize(function(){e()}),t(".body-shadow").on("click",function(e){t(e.target).is(".hint-white")||t(".hint-white").hide()}),t(".item-border > span").click(function(e){var a=t(this).closest(".item-wrapper"),s=a.parent(),i=s.innerWidth()-parseFloat(s.css("padding-left"))-parseFloat(s.css("padding-right")),o=a.outerWidth()+4,n=Math.floor(i/o),r=t(".item-wrapper:visible").index(a)+1;t(".item-border").not(t(this).parent()).removeClass("active").removeClass("active-left"),r%n==n-1||r%n==0?t(this).parent().toggleClass("active").toggleClass("active-left"):t(this).parent().toggleClass("active")})});